<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="bit.data.dao.QnaDao">
	<insert id="insertQna" parameterType="qnaDto">
		insert into qna (qnanum, usernum, username, qnatype, subject, content, photo,pass,writeday,regroup,restep,relevel)
		values (#{qnanum}, #{usernum}, #{username}, #{qnatype}, #{subject}, #{content}, #{photo},#{pass},now(), 0, 0, 0)
	</insert>
	<select id="getTotalCount" parameterType="Map" resultType="int">
		select count(*) from qna
		<if test="searchcolumn!=null and searchword!=null">
			where ${searchcolumn} like concat('%',#{searchword},'%')
		</if>
	</select>
	<select id="getPagingList" parameterType="Map" resultType="qnaDto">
		select * from qna
		<if test="searchcolumn!=null and searchword!=null">
			where ${searchcolumn} like concat('%',#{searchword},'%')
		</if>
		order by qnanum desc limit #{startnum},#{perpage}
	</select>
	<select id="selectByNum" parameterType="int" resultType="qnaDto">
		select * from qna where qnanum = #{qnanum}
	</select>

	<update id="updateQna" parameterType="qnaDto">
		update qna set subject = #{subject}, content = #{content}
		<if test="photo!=null">
			,photo = #{photo}
		</if>
		where qnanum = #{qnanum}
	</update>
	<delete id="deleteQna" parameterType="int">
		delete from qna where qnanum = #{qnanum}
	</delete>
</mapper>